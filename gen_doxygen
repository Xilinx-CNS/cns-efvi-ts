#! /bin/bash
# SPDX-License-Identifier: Apache-2.0
# (c) Copyright 2020 - 2022 Xilinx, Inc. All rights reserved.

set -e

usage() {
    cat <<EOF
This is a wrapper script which builds the autogenerated part of the
Test Environment documentation.

Usage:
  $ gen_doxygen

Documentation will be located at efvi-ts/doc/html/
EOF

    exit 0
}

test "$1" = "--help" -o "$1" = "-h" && usage

test -e "./scripts/guess.sh" && source "./scripts/guess.sh"

if test -z "${TE_BASE}" ; then
    echo "TE_BASE environment variable must be set" >&2
    exit 1
fi

pushd efvi-ts

doxygen > /dev/null

echo "" >&2
echo "###########################################" >&2
echo "#### See efvi-ts/doc/html/index.html ######" >&2
echo "###########################################" >&2

popd
